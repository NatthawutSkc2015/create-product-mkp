<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <form action="" id="form">
        <div id="area_product_attributes" class="row">
            <div class="col-4 mt-1">
                <label>การใช้งาน <span class="text-danger"></span></label>
                <select name="attributes.100874" id="" multiple>
                    <option value="">------ None ------</option>
                    <option value="1004502" >ของใช้ในบ้าน</option>
                    <option value="1004495" selected>เสื้อผ้า</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>การใช้งาน <span class="text-danger"></span></label><select class="form-control form-control-sm"
                    name="attributes.100875" placeholder="การใช้งาน">
                    <option value="">------ None ------</option>
                    <option value="1004502">ของใช้ในบ้าน</option>
                    <option value="1004495">เสื้อผ้า</option>
                    <option value="1004517">ของเล่น</option>
                    <option value="1004433">อาหารและเครื่องดื่ม</option>
                    <option value="1004490">หนังสือ</option>
                    <option value="1004506">อัญมณี</option>
                    <option value="1002890">อิเล็กทรอนิกส์</option>
                    <option value="1004489">ความงาม</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>จํานวนต่อแพ็ค <span class="text-danger"></span></label><select
                    class="form-control form-control-sm" name="attributes.100347" placeholder="จํานวนต่อแพ็ค">
                    <option value="">------ None ------</option>
                    <option value="1000256">1</option>
                    <option value="1000257">2</option>
                    <option value="1000258">3</option>
                    <option value="1000347">4</option>
                    <option value="1000354">5</option>
                    <option value="1000638">6</option>
                    <option value="1000355">7</option>
                    <option value="1000639">8</option>
                    <option value="1000356">9</option>
                    <option value="1000357">10</option>
                    <option value="1001201">11</option>
                    <option value="1001202">12</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>วัสดุ <span class="text-danger"></span></label><select class="form-control form-control-sm"
                    name="attributes.100701" placeholder="วัสดุ">
                    <option value="">------ None ------</option>
                    <option value="1000014">อะคริลิก</option>
                    <option value="1001399">หยก</option>
                    <option value="1004217">แร่</option>
                    <option value="1000020">หิน</option>
                    <option value="1000007">พลาสติก</option>
                    <option value="1000006">สเตนเลส</option>
                    <option value="1000022">ซิลิโคน</option>
                    <option value="1000607">เซรามิก</option>
                    <option value="1000012">PVC</option>
                    <option value="1000009">ABS</option>
                    <option value="1000008">ไม้</option>
                    <option value="1000016">ยาง</option>
                    <option value="1000030">อลูมิเนียม</option>
                    <option value="1000034">โลหะ</option>
                    <option value="1000017">แก้ว</option>
                    <option value="1000011">โพลีเอสเตอร์</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>สไตล์ <span class="text-danger"></span></label><select class="form-control form-control-sm"
                    name="attributes.100398" placeholder="สไตล์">
                    <option value="">------ None ------</option>
                    <option value="1004422">ของเก่า</option>
                    <option value="1004423">เอเชีย</option>
                    <option value="1004424">คลาสสิก</option>
                    <option value="1004425">ชนบทฝรั่งเศส</option>
                    <option value="1004426">สวน</option>
                    <option value="1004427">มีเสน่ห์</option>
                    <option value="1004428">เชิงอุตสาหกรรม</option>
                    <option value="1001169">แบบญี่ปุ่น</option>
                    <option value="1004337">สมัยใหม่</option>
                    <option value="1001174">ย้อนยุค</option>
                    <option value="1004429">ชนบท</option>
                    <option value="1004430">เอเชียตะวันออกเฉียงใต้</option>
                    <option value="1004431">แบบดั้งเดิม</option>
                    <option value="1003637">แนวเขตร้อน</option>
                    <option value="1003600">วินเทจ</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>การตั้งค่า <span class="text-danger"></span></label><select class="form-control form-control-sm"
                    name="attributes.100779" placeholder="การตั้งค่า">
                    <option value="">------ None ------</option>
                    <option value="1004360">ห้องนอน</option>
                    <option value="1004359">ห้องน้ำ</option>
                    <option value="1004368">ห้องน้ำ</option>
                    <option value="1004363">ห้องครัว</option>
                    <option value="1004358">ระเบียง</option>
                    <option value="1004362">โรงรถ</option>
                    <option value="1004369">ตู้เสื้อผ้า</option>
                    <option value="1004366">การศึกษา</option>
                    <option value="1004364">สํานักงาน</option>
                    <option value="1000268">สากล</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>คุณลักษณะเด่น <span class="text-danger"></span></label><select
                    class="form-control form-control-sm" name="attributes.100443" placeholder="คุณลักษณะเด่น">
                    <option value="">------ None ------</option>
                    <option value="1002432">ปรับได้</option>
                    <option value="1004584">ย่อยสลายได้</option>
                    <option value="1000001">เป็นมิตรกับระบบนิเวศ</option>
                    <option value="1004604">รีไซเคิลได้</option>
                    <option value="1002578">ยุบได้</option>
                    <option value="1002263">พับได้</option>
                    <option value="1000330">กันน้ำ</option>
                    <option value="1002456">หมุนได้</option>
                    <option value="1001442">กันฝุ่น</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>รูปทรง <span class="text-danger"></span></label><select class="form-control form-control-sm"
                    name="attributes.100548" placeholder="รูปทรง">
                    <option value="">------ None ------</option>
                    <option value="1001501">วงรี</option>
                    <option value="1001504">กลม</option>
                    <option value="1004387">รูปหัวใจ</option>
                    <option value="1001505">สี่เหลี่ยมจัตุรัส</option>
                    <option value="1001503">สี่เหลี่ยมผืนผ้า</option>
                    <option value="1004390">สี่เหลี่ยมคางหมู</option>
                    <option value="1004384">ช่องโค้ง</option>
                    <option value="1002243">ผิดปกติ</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>ประเภทของการจัดเก็บ <span class="text-danger"></span></label><select
                    class="form-control form-control-sm" name="attributes.100702" placeholder="ประเภทของการจัดเก็บ">
                    <option value="">------ None ------</option>
                    <option value="1004418">มีด้ามจับ</option>
                    <option value="1004294">มีฝาปิด</option>
                    <option value="1004417">มีลิ้นชัก</option>
                    <option value="1004420">มีล้อ</option>
                    <option value="1004416">มีช่อง</option>
                    <option value="1004421">มีซิป</option>
                </select>
            </div>
            <div class="col-4 mt-1">
                <label>สี <span class="text-danger">*required</span></label>
                <input type="text"class="form-control form-control-sm" value="pink" placeholder="สี" name="attributes.100000" />
            </div>
            <div class="col-4 mt-1">
                <label>ประเภทของการจัดเก็บ <span class="text-danger"></span></label><select
                    class="form-control form-control-sm" name="attributes.size" placeholder="ประเภทของการจัดเก็บ">
                    <option value="">------ None ------</option>
                    <option value="m">M</option>
                    <option value="a">A</option>
                </select>
            </div>
        </div>
    </form>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const formCreate = document.querySelector("#form");
        const setValue = (obj, path, value) => {
            const keys = path.replace(/\[(\w+)\]/g, ".$1").split(".");
            keys.reduce((o, key, i) => {
                if (i === keys.length - 1) o[key] = value;
                else o[key] = o[key] || (isNaN(keys[i + 1]) ? {} : {});
                return o[key];
            }, obj);
        };
        const paramsCreate = {};
        const formData = new FormData(formCreate);
        for (const [key, value] of formData.entries()) {
            const input = formCreate.querySelector(`[name="${key}"]`);
            if (input && input.type === "checkbox") {
                const checkedCheckboxes = Array.from(
                    formCreate.querySelectorAll(`[name="${key}"]:checked`)
                ).map((checkbox) => checkbox.id);
                setValue(paramsCreate, key, checkedCheckboxes);
            } else if (input && input.type === "radio") {
                const checkedRadio = formCreate.querySelector(
                    `[name="${key}"]:checked`
                );
                setValue(paramsCreate, key, checkedRadio ? checkedRadio.id : null);
            } else if (input.tagName === "SELECT") {
                if (input.type == 'select-multiple') {
                    const selectedOptions = Array.from(input.selectedOptions).map((option) => {
                        return {
                            id: option.value,
                            name: option.innerText
                        }
                    })
                    setValue(paramsCreate, key, selectedOptions)
                } else if (input.type == 'select-one') {
                    if (value) {
                        setValue(paramsCreate, key, value)
                    }
                }
            } else {
                setValue(paramsCreate, key, value);
            }
        }
        console.log(paramsCreate);
        axios.post("/test.html", paramsCreate);
    </script>
</body>

</html>